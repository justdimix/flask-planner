from app import app, db, User

# Этот скрипт нужно запустить один раз, чтобы создать таблицы
# Также он покажет количество уже созданных пользователей
with app.app_context():
    print("Создание таблиц базы данных...")
    db.create_all()

    # Считаем количество записей в таблице User
    # Если таблица только что создана, будет 0
    try:
        user_count = User.query.count()
        print("Успех! База данных создана/обновлена.")
        print(f"Количество зарегистрированных пользователей (логинов) в базе: {user_count}")
    except Exception as e:
        print(f"Произошла ошибка при подсчете пользователей: {e}")